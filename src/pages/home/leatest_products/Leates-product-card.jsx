import { useOutletContext } from "react-router-dom";
import AddToCartButton from "../../../utils/AddToCartButton";
import { useState } from "react";

export default function LeatestProductCard({ item }) {
  const [, , , addToCart] = useOutletContext();
  const [isImageLoaded, setIsImageLoaded] = useState(false);
  return (
    <div>
      <div className="group relative">
        <div className="absolute left-4 top-40 hidden items-center gap-5 group-hover:flex group-hover:flex-col">
          <AddToCartButton onClick={addToCart} product={item}></AddToCartButton>
          <button>
            <svg
              width="24"
              height="24"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13.7141 3.30182C12.9713 2.55413 11.9865 2.09955 10.9387 2.02074C9.89102 1.94192 8.84997 2.24411 8.00494 2.87236C7.11474 2.20608 6.00672 1.90396 4.90401 2.02683C3.80131 2.1497 2.78582 2.68844 2.06205 3.53456C1.33828 4.38068 0.959991 5.47133 1.00336 6.58688C1.04672 7.70243 1.50852 8.76001 2.29576 9.54665L7.50818 14.7917C7.57323 14.8577 7.65061 14.9101 7.73587 14.9459C7.82113 14.9816 7.91257 15 8.00494 15C8.0973 15 8.18875 14.9816 8.27401 14.9459C8.35927 14.9101 8.43665 14.8577 8.50169 14.7917L13.7141 9.54665C14.1218 9.13671 14.4452 8.64995 14.6658 8.11419C14.8864 7.57843 15 7.00418 15 6.42424C15 5.8443 14.8864 5.27004 14.6658 4.73428C14.4452 4.19852 14.1218 3.71177 13.7141 3.30182ZM12.7276 8.55396L8.00494 13.2992L3.28227 8.55396C2.8661 8.13343 2.5826 7.59861 2.46733 7.01657C2.35207 6.43454 2.41017 5.83121 2.63436 5.28228C2.85854 4.73335 3.23882 4.26325 3.72749 3.93097C4.21616 3.59868 4.79147 3.419 5.38123 3.41447C6.16912 3.41641 6.92404 3.73293 7.4802 4.29452C7.54524 4.3605 7.62262 4.41288 7.70788 4.44862C7.79314 4.48437 7.88459 4.50277 7.97695 4.50277C8.06931 4.50277 8.16076 4.48437 8.24602 4.44862C8.33128 4.41288 8.40866 4.3605 8.47371 4.29452C9.04625 3.79527 9.7859 3.53355 10.543 3.56233C11.3 3.59111 12.0179 3.90824 12.5514 4.44954C13.0849 4.99083 13.3941 5.71586 13.4164 6.47788C13.4387 7.23989 13.1725 7.98199 12.6716 8.55396H12.7276Z"
                fill="#7E33E0"
              />
            </svg>
          </button>
          <button>
            <svg
              width="24"
              height="24"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.74982 6.8334H7.99982V5.0834C7.99982 4.92869 7.93836 4.78032 7.82897 4.67092C7.71957 4.56152 7.5712 4.50007 7.41649 4.50007C7.26178 4.50007 7.11341 4.56152 7.00401 4.67092C6.89461 4.78032 6.83316 4.92869 6.83316 5.0834V6.8334H5.08316C4.92845 6.8334 4.78007 6.89486 4.67068 7.00425C4.56128 7.11365 4.49982 7.26202 4.49982 7.41673C4.49982 7.57144 4.56128 7.71982 4.67068 7.82921C4.78007 7.93861 4.92845 8.00007 5.08316 8.00007H6.83316V9.75007C6.83316 9.90478 6.89461 10.0531 7.00401 10.1625C7.11341 10.2719 7.26178 10.3334 7.41649 10.3334C7.5712 10.3334 7.71957 10.2719 7.82897 10.1625C7.93836 10.0531 7.99982 9.90478 7.99982 9.75007V8.00007H9.74982C9.90453 8.00007 10.0529 7.93861 10.1623 7.82921C10.2717 7.71982 10.3332 7.57144 10.3332 7.41673C10.3332 7.26202 10.2717 7.11365 10.1623 7.00425C10.0529 6.89486 9.90453 6.8334 9.74982 6.8334ZM13.664 12.8359L11.4998 10.6892C12.3399 9.64181 12.7467 8.31232 12.6366 6.97416C12.5266 5.63599 11.908 4.39086 10.908 3.49478C9.90812 2.59869 8.60288 2.11978 7.26069 2.15651C5.91851 2.19323 4.64141 2.74281 3.69199 3.69223C2.74257 4.64165 2.19299 5.91876 2.15626 7.26094C2.11954 8.60312 2.59845 9.90837 3.49453 10.9083C4.39061 11.9082 5.63575 12.5268 6.97391 12.6369C8.31208 12.7469 9.64156 12.3401 10.689 11.5001L12.8357 13.6467C12.8899 13.7014 12.9544 13.7448 13.0255 13.7744C13.0966 13.804 13.1728 13.8193 13.2498 13.8193C13.3268 13.8193 13.4031 13.804 13.4742 13.7744C13.5452 13.7448 13.6098 13.7014 13.664 13.6467C13.7691 13.538 13.8279 13.3926 13.8279 13.2413C13.8279 13.09 13.7691 12.9447 13.664 12.8359ZM7.41649 11.5001C6.60888 11.5001 5.81941 11.2606 5.14791 10.8119C4.47641 10.3632 3.95304 9.72549 3.64398 8.97936C3.33492 8.23323 3.25406 7.4122 3.41162 6.62011C3.56917 5.82803 3.95807 5.10045 4.52914 4.52938C5.1002 3.95832 5.82778 3.56942 6.61987 3.41186C7.41196 3.2543 8.23298 3.33517 8.97911 3.64422C9.72525 3.95328 10.363 4.47665 10.8117 5.14815C11.2603 5.81966 11.4998 6.60913 11.4998 7.41673C11.4998 8.4997 11.0696 9.53831 10.3038 10.3041C9.53807 11.0699 8.49946 11.5001 7.41649 11.5001Z"
                fill="#7E33E0"
              />
            </svg>
          </button>
        </div>
        {!isImageLoaded ? (
          <div className="h-[294px] w-[440px] bg-grey-1"></div>
        ) : null}
        <img
          src={item.imageSet[0]}
          alt={item.description}
          onLoad={() => setIsImageLoaded(true)}
        />
      </div>
      <div className="mt-2 flex">
        <p className="tetx-primary">{item.name}</p>
        <span className="ml-auto flex gap-4">
          <p className="text-[16px] font-normal text-black">
            {item.price + "$"}
          </p>
          <p className="text-sm font-normal text-primary">
            {item.wasPrice + "$"}
          </p>
        </span>
      </div>
    </div>
  );
}
